---
import { markdown } from "@astropub/md";

import { ActivityData } from "~/data/schedule";

import Heading from "./Heading.astro";

interface Props {
	activity: ActivityData;
	class?: string;
}

const { class: className, activity, ...rest } = Astro.props;

const descriptionLines = await Promise.all(
	activity.description.map(async (p) => await markdown(p)),
);
---

<div class:list={["scheduled-activity", className]} {...rest}>
	<Heading level="h3" class="activity-title">{activity.title}</Heading>
	<div class="activity-locators">
		<div class="activity-time">
			<span class="activity-time-zone">EDT</span>
			<span class="activity-time-value">{activity.time ?? "Time TBA"}</span>
		</div>
		<div class="activity-location">{activity.location ?? "Location TBA"}</div>
	</div>
	{
		(
			<div class="activity-description">
				{descriptionLines.map((line) => (
					<p>{line}</p>
				))}
			</div>
		)
	}
</div>

<style>
	.scheduled-activity {
		display: grid;
		font-family: var(--fontFamilyBody);
		gap: 0.75rem 1rem;
		grid-template-columns: clamp(5rem, 20vw, 10rem) auto;
		grid-template-rows: auto auto;
		margin: 0 var(--widthBodyPadding) 3rem;
		max-width: var(--widthBodyLean);
	}

	.activity-title {
		font-size: var(--fontSizeH3);
		grid-area: 1 / 2 / 2 / 3;
	}

	.activity-locators {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		grid-area: 1 / 1 / 3 / 2;
		text-align: right;
	}

	.activity-time-value {
		font-size: var(--fontSizeH3);
		font-family: var(--fontFamilyHeading);
	}

	.activity-location {
		font-size: var(--fontSizeBody);
	}

	.activity-description {
		grid-area: 2 / 2 / 3 / 3;
		font-size: var(--fontSizeBody);
		width: 100%;
	}
</style>
